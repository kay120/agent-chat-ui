# Commit è§„èŒƒ

## ğŸ“‹ ç›®å½•

- [Commit æ¶ˆæ¯æ ¼å¼](#commit-æ¶ˆæ¯æ ¼å¼)
- [ç±»å‹è¯´æ˜](#ç±»å‹è¯´æ˜)
- [ç¤ºä¾‹](#ç¤ºä¾‹)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å·¥å…·é…ç½®](#å·¥å…·é…ç½®)

## Commit æ¶ˆæ¯æ ¼å¼

æœ¬é¡¹ç›®é‡‡ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒã€‚

### åŸºæœ¬æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

### æ ¼å¼è¯´æ˜

| éƒ¨åˆ† | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `type` | âœ… æ˜¯ | æäº¤ç±»å‹ |
| `scope` | âŒ å¦ | å½±å“èŒƒå›´ |
| `subject` | âœ… æ˜¯ | ç®€çŸ­æè¿° |
| `body` | âŒ å¦ | è¯¦ç»†æè¿° |
| `footer` | âŒ å¦ | å…³è” Issueã€ç ´åæ€§å˜æ›´ |

### è¯¦ç»†è¯´æ˜

#### Type (ç±»å‹)

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `feat` | æ–°åŠŸèƒ½ | `feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½` |
| `fix` | Bug ä¿®å¤ | `fix: ä¿®å¤ç™»å½•å¤±è´¥é—®é¢˜` |
| `docs` | æ–‡æ¡£æ›´æ–° | `docs: æ›´æ–° API æ–‡æ¡£` |
| `style` | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ | `style: æ ¼å¼åŒ–ä»£ç ` |
| `refactor` | é‡æ„ï¼ˆä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤ï¼‰ | `refactor: é‡æ„ç”¨æˆ·æœåŠ¡` |
| `perf` | æ€§èƒ½ä¼˜åŒ– | `perf: ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢` |
| `test` | æµ‹è¯•ç›¸å…³ | `test: æ·»åŠ ç”¨æˆ·ç™»å½•æµ‹è¯•` |
| `build` | æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ– | `build: å‡çº§ webpack åˆ° 5.0` |
| `ci` | CI é…ç½®æ–‡ä»¶å’Œè„šæœ¬ | `ci: æ·»åŠ  GitHub Actions` |
| `chore` | å…¶ä»–ä¸ä¿®æ”¹æºç çš„å˜æ›´ | `chore: æ›´æ–° .gitignore` |
| `revert` | å›é€€ä¹‹å‰çš„æäº¤ | `revert: å›é€€ feat: æ·»åŠ ç™»å½•` |

#### Scope (èŒƒå›´)

å¯é€‰ï¼Œè¡¨ç¤ºå½±å“çš„æ¨¡å—æˆ–ç»„ä»¶ï¼š

```
feat(backend): æ·»åŠ ç”¨æˆ·è®¤è¯
fix(frontend): ä¿®å¤æŒ‰é’®æ ·å¼
docs(api): æ›´æ–°æ¥å£æ–‡æ¡£
```

å¸¸ç”¨ scopeï¼š
- `backend` - åç«¯
- `frontend` - å‰ç«¯
- `api` - API æ¥å£
- `database` - æ•°æ®åº“
- `ui` - ç”¨æˆ·ç•Œé¢
- `auth` - è®¤è¯
- `config` - é…ç½®
- `deps` - ä¾èµ–

#### Subject (ä¸»é¢˜)

ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡ 50 ä¸ªå­—ç¬¦ï¼š

âœ… **å¥½çš„ç¤ºä¾‹**ï¼š
```
feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
fix: ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜
docs: æ›´æ–°å®‰è£…æŒ‡å—
```

âŒ **ä¸å¥½çš„ç¤ºä¾‹**ï¼š
```
feat: æ·»åŠ äº†ä¸€ä¸ªéå¸¸å¤æ‚çš„ç”¨æˆ·ç™»å½•åŠŸèƒ½ï¼ŒåŒ…æ‹¬é‚®ç®±éªŒè¯ã€æ‰‹æœºéªŒè¯ç­‰
fix: ä¿®å¤äº†ä¸€äº›é—®é¢˜
docs: æ›´æ–°
```

**è§„åˆ™**ï¼š
- ä½¿ç”¨ç¥ˆä½¿å¥ï¼Œç°åœ¨æ—¶æ€ï¼š"æ·»åŠ "è€Œä¸æ˜¯"æ·»åŠ äº†"
- ä¸è¦å¤§å†™é¦–å­—æ¯
- ç»“å°¾ä¸åŠ å¥å·
- ç®€æ´æ˜äº†

#### Body (æ­£æ–‡)

å¯é€‰ï¼Œè¯¦ç»†æè¿°å˜æ›´å†…å®¹ï¼š

```
feat(backend): æ·»åŠ  SQLite æŒä¹…åŒ–å­˜å‚¨

- åˆ›å»º database_service.py æ¨¡å—
- å®ç°çº¿ç¨‹å’Œæ¶ˆæ¯è¡¨
- æ·»åŠ  CRUD æ“ä½œ
- é›†æˆåˆ°ç°æœ‰æœåŠ¡ä¸­

è¿™ä¸ªå˜æ›´ä½¿å¾—å¯¹è¯å†å²å¯ä»¥æ°¸ä¹…ä¿å­˜ï¼Œ
å³ä½¿é‡å¯æœåŠ¡å™¨ä¹Ÿä¸ä¼šä¸¢å¤±æ•°æ®ã€‚
```

**è§„åˆ™**ï¼š
- ä¸ subject ä¹‹é—´ç©ºä¸€è¡Œ
- è¯´æ˜å˜æ›´çš„åŸå› ã€åšäº†ä»€ä¹ˆã€å½±å“æ˜¯ä»€ä¹ˆ
- å¯ä»¥åˆ†å¤šæ®µ
- æ¯è¡Œä¸è¶…è¿‡ 72 ä¸ªå­—ç¬¦

#### Footer (é¡µè„š)

å¯é€‰ï¼Œç”¨äºå…³è” Issue æˆ–è¯´æ˜ç ´åæ€§å˜æ›´ï¼š

```
feat(api): é‡æ„ç”¨æˆ· API

BREAKING CHANGE: ç”¨æˆ· API ç«¯ç‚¹ä» /user æ”¹ä¸º /api/users

è¿ç§»æŒ‡å—:
- å°†æ‰€æœ‰ /user è¯·æ±‚æ”¹ä¸º /api/users
- æ›´æ–°å®¢æˆ·ç«¯ä»£ç 

Closes #123
Fixes #456
Related to #789
```

**å…³é”®å­—**ï¼š
- `Closes #123` - å…³é—­ Issue
- `Fixes #123` - ä¿®å¤ Issue
- `Related to #123` - ç›¸å…³ Issue
- `BREAKING CHANGE:` - ç ´åæ€§å˜æ›´

## ç±»å‹è¯´æ˜

### feat (æ–°åŠŸèƒ½)

æ·»åŠ æ–°åŠŸèƒ½æˆ–ç‰¹æ€§ã€‚

```bash
# ç®€å•ç¤ºä¾‹
git commit -m "feat: æ·»åŠ ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½"

# å¸¦ scope
git commit -m "feat(auth): æ·»åŠ é‚®ç®±éªŒè¯"

# å®Œæ•´ç¤ºä¾‹
git commit -m "feat(backend): æ·»åŠ æµå¼èŠå¤©åŠŸèƒ½

- å®ç° SSE æµå¼è¾“å‡º
- æ”¯æŒå®æ—¶æ˜¾ç¤º AI å›å¤
- ä¼˜åŒ–å‰ç«¯æ˜¾ç¤ºæ•ˆæœ

Closes #123"
```

### fix (Bug ä¿®å¤)

ä¿®å¤ Bugã€‚

```bash
# ç®€å•ç¤ºä¾‹
git commit -m "fix: ä¿®å¤ç™»å½•å¤±è´¥é—®é¢˜"

# å¸¦ scope
git commit -m "fix(frontend): ä¿®å¤æŒ‰é’®ç‚¹å‡»æ— å“åº”"

# å®Œæ•´ç¤ºä¾‹
git commit -m "fix(backend): ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜

é—®é¢˜æè¿°:
é•¿æ—¶é—´è¿è¡Œåå†…å­˜æŒç»­å¢é•¿ï¼Œæœ€ç»ˆå¯¼è‡´æœåŠ¡å´©æºƒã€‚

è§£å†³æ–¹æ¡ˆ:
- ä¿®å¤äº‹ä»¶ç›‘å¬å™¨æœªæ­£ç¡®ç§»é™¤
- æ·»åŠ å®šæ—¶æ¸…ç†æœºåˆ¶
- ä¼˜åŒ–ç¼“å­˜ç­–ç•¥

Fixes #456"
```

### docs (æ–‡æ¡£)

æ›´æ–°æ–‡æ¡£ã€‚

```bash
git commit -m "docs: æ›´æ–° README å®‰è£…è¯´æ˜"
git commit -m "docs(api): æ·»åŠ  API ä½¿ç”¨ç¤ºä¾‹"
git commit -m "docs: ä¿®å¤æ–‡æ¡£ä¸­çš„é”™åˆ«å­—"
```

### style (ä»£ç æ ¼å¼)

ä¸å½±å“ä»£ç åŠŸèƒ½çš„æ ¼å¼å˜æ›´ï¼ˆç©ºæ ¼ã€æ ¼å¼åŒ–ã€ç¼ºå°‘åˆ†å·ç­‰ï¼‰ã€‚

```bash
git commit -m "style: æ ¼å¼åŒ–ä»£ç "
git commit -m "style(backend): ç»Ÿä¸€ä»£ç ç¼©è¿›"
git commit -m "style: ç§»é™¤å¤šä½™çš„ç©ºè¡Œ"
```

### refactor (é‡æ„)

æ—¢ä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤ Bug çš„ä»£ç å˜æ›´ã€‚

```bash
git commit -m "refactor: é‡æ„ç”¨æˆ·æœåŠ¡"
git commit -m "refactor(database): ä¼˜åŒ–æ•°æ®åº“è¿æ¥ç®¡ç†"
git commit -m "refactor: æå–å…¬å…±å‡½æ•°åˆ° utils"
```

### perf (æ€§èƒ½ä¼˜åŒ–)

æå‡æ€§èƒ½çš„ä»£ç å˜æ›´ã€‚

```bash
git commit -m "perf: ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½"
git commit -m "perf(frontend): å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“"
git commit -m "perf: æ·»åŠ ç¼“å­˜æœºåˆ¶"
```

### test (æµ‹è¯•)

æ·»åŠ æˆ–ä¿®æ”¹æµ‹è¯•ã€‚

```bash
git commit -m "test: æ·»åŠ ç”¨æˆ·ç™»å½•æµ‹è¯•"
git commit -m "test(api): å¢åŠ  API é›†æˆæµ‹è¯•"
git commit -m "test: ä¿®å¤å¤±è´¥çš„å•å…ƒæµ‹è¯•"
```

### build (æ„å»º)

å½±å“æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–çš„å˜æ›´ã€‚

```bash
git commit -m "build: å‡çº§ webpack åˆ° 5.0"
git commit -m "build: æ·»åŠ  TypeScript æ”¯æŒ"
git commit -m "build(deps): æ›´æ–°ä¾èµ–åŒ…"
```

### ci (æŒç»­é›†æˆ)

ä¿®æ”¹ CI é…ç½®æ–‡ä»¶å’Œè„šæœ¬ã€‚

```bash
git commit -m "ci: æ·»åŠ  GitHub Actions å·¥ä½œæµ"
git commit -m "ci: ä¼˜åŒ–æµ‹è¯•æµç¨‹"
git commit -m "ci: æ·»åŠ è‡ªåŠ¨éƒ¨ç½²è„šæœ¬"
```

### chore (å…¶ä»–)

å…¶ä»–ä¸ä¿®æ”¹æºç æˆ–æµ‹è¯•çš„å˜æ›´ã€‚

```bash
git commit -m "chore: æ›´æ–° .gitignore"
git commit -m "chore: æ·»åŠ  EditorConfig"
git commit -m "chore: æ¸…ç†æ— ç”¨æ–‡ä»¶"
```

### revert (å›é€€)

å›é€€ä¹‹å‰çš„æäº¤ã€‚

```bash
git commit -m "revert: å›é€€ feat: æ·»åŠ ç”¨æˆ·ç™»å½•

This reverts commit abc123def456.

åŸå› : å‘ç°ä¸¥é‡æ€§èƒ½é—®é¢˜"
```

## ç¤ºä¾‹

### ç¤ºä¾‹ 1: ç®€å•çš„æ–°åŠŸèƒ½

```bash
git commit -m "feat: æ·»åŠ ç”¨æˆ·å¤´åƒä¸Šä¼ åŠŸèƒ½"
```

### ç¤ºä¾‹ 2: å¸¦ scope çš„ Bug ä¿®å¤

```bash
git commit -m "fix(auth): ä¿®å¤ token è¿‡æœŸåæ— æ³•åˆ·æ–°çš„é—®é¢˜"
```

### ç¤ºä¾‹ 3: å®Œæ•´çš„æäº¤æ¶ˆæ¯

```bash
git commit -m "feat(backend): æ·»åŠ  SQLite æŒä¹…åŒ–å­˜å‚¨

å®ç°åŠŸèƒ½:
- åˆ›å»º database_service.py æ¨¡å—
- å®ç° threads å’Œ messages è¡¨
- æ·»åŠ å®Œæ•´çš„ CRUD æ“ä½œ
- é›†æˆåˆ° thread_service ä¸­

æŠ€æœ¯ç»†èŠ‚:
- ä½¿ç”¨ SQLite ä½œä¸ºåµŒå…¥å¼æ•°æ®åº“
- å®ç°è¿æ¥æ± ç®¡ç†
- æ·»åŠ äº‹åŠ¡æ”¯æŒ
- ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

å½±å“:
- å¯¹è¯å†å²å¯ä»¥æ°¸ä¹…ä¿å­˜
- é‡å¯æœåŠ¡å™¨åæ•°æ®ä¸ä¸¢å¤±
- æ”¯æŒæ›´å¤§è§„æ¨¡çš„æ•°æ®å­˜å‚¨

Closes #124"
```

### ç¤ºä¾‹ 4: ç ´åæ€§å˜æ›´

```bash
git commit -m "feat(api): é‡æ„ç”¨æˆ· API ç«¯ç‚¹

BREAKING CHANGE: ç”¨æˆ· API ç«¯ç‚¹ä» /user æ”¹ä¸º /api/v1/users

å˜æ›´åŸå› :
- ç»Ÿä¸€ API è·¯å¾„è§„èŒƒ
- æ”¯æŒ API ç‰ˆæœ¬æ§åˆ¶
- æé«˜å¯ç»´æŠ¤æ€§

è¿ç§»æŒ‡å—:
1. å°†æ‰€æœ‰ /user è¯·æ±‚æ”¹ä¸º /api/v1/users
2. æ›´æ–°å®¢æˆ·ç«¯ SDK
3. æ›´æ–°æ–‡æ¡£

å½±å“èŒƒå›´:
- æ‰€æœ‰ä½¿ç”¨ç”¨æˆ· API çš„å®¢æˆ·ç«¯
- ç¬¬ä¸‰æ–¹é›†æˆ

Closes #200"
```

### ç¤ºä¾‹ 5: å¤šä¸ª Issue

```bash
git commit -m "fix(frontend): ä¿®å¤å¤šä¸ª UI é—®é¢˜

- ä¿®å¤æŒ‰é’®æ ·å¼é”™ä½
- ä¿®å¤è¡¨å•éªŒè¯æç¤ºä¸æ˜¾ç¤º
- ä¿®å¤ç§»åŠ¨ç«¯å¸ƒå±€é—®é¢˜

Fixes #301, #302, #303"
```

## æœ€ä½³å®è·µ

### 1. æäº¤é¢‘ç‡

- âœ… æ¯å®Œæˆä¸€ä¸ªå°åŠŸèƒ½å°±æäº¤
- âœ… æ¯ä¿®å¤ä¸€ä¸ª Bug å°±æäº¤
- âŒ ä¸è¦ç§¯ç´¯å¤ªå¤šå˜æ›´ä¸€æ¬¡æ€§æäº¤
- âŒ ä¸è¦æäº¤æœªå®Œæˆçš„ä»£ç 

### 2. æäº¤ç²’åº¦

- âœ… ä¸€ä¸ªæäº¤åªåšä¸€ä»¶äº‹
- âœ… ç›¸å…³çš„å˜æ›´æ”¾åœ¨ä¸€èµ·
- âŒ ä¸è¦åœ¨ä¸€ä¸ªæäº¤ä¸­æ··åˆå¤šä¸ªä¸ç›¸å…³çš„å˜æ›´
- âŒ ä¸è¦åœ¨ä¸€ä¸ªæäº¤ä¸­åŒæ—¶ä¿®å¤å¤šä¸ª Bug

### 3. æäº¤æ¶ˆæ¯

- âœ… æ¸…æ™°æè¿°åšäº†ä»€ä¹ˆ
- âœ… è¯´æ˜ä¸ºä»€ä¹ˆè¿™æ ·åš
- âœ… ä½¿ç”¨ç°åœ¨æ—¶æ€
- âŒ ä¸è¦ä½¿ç”¨æ¨¡ç³Šçš„æè¿°
- âŒ ä¸è¦çœç•¥é‡è¦ä¿¡æ¯

### 4. æäº¤å‰æ£€æŸ¥

```bash
# æŸ¥çœ‹å˜æ›´
git diff

# æŸ¥çœ‹æš‚å­˜çš„å˜æ›´
git diff --staged

# æŸ¥çœ‹çŠ¶æ€
git status

# éƒ¨åˆ†æäº¤
git add -p
```

### 5. ä¿®æ”¹æäº¤

```bash
# ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤
git commit --amend

# ä¿®æ”¹æäº¤æ¶ˆæ¯
git commit --amend -m "æ–°çš„æäº¤æ¶ˆæ¯"

# äº¤äº’å¼å˜åŸºï¼ˆä¿®æ”¹å†å²æäº¤ï¼‰
git rebase -i HEAD~3
```

## å·¥å…·é…ç½®

### Commitlint

å®‰è£…å’Œé…ç½® commitlint æ¥å¼ºåˆ¶æ‰§è¡Œè§„èŒƒï¼š

```bash
# å®‰è£…
npm install --save-dev @commitlint/cli @commitlint/config-conventional

# é…ç½®æ–‡ä»¶ commitlint.config.js
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat',
        'fix',
        'docs',
        'style',
        'refactor',
        'perf',
        'test',
        'build',
        'ci',
        'chore',
        'revert'
      ]
    ],
    'subject-max-length': [2, 'always', 50],
    'body-max-line-length': [2, 'always', 72]
  }
};
```

### Husky

ä½¿ç”¨ Husky åœ¨æäº¤å‰è‡ªåŠ¨æ£€æŸ¥ï¼š

```bash
# å®‰è£…
npm install --save-dev husky

# åˆå§‹åŒ–
npx husky install

# æ·»åŠ  commit-msg hook
npx husky add .husky/commit-msg 'npx --no -- commitlint --edit $1'
```

### Commitizen

ä½¿ç”¨ Commitizen äº¤äº’å¼ç”Ÿæˆè§„èŒƒçš„æäº¤æ¶ˆæ¯ï¼š

```bash
# å®‰è£…
npm install --save-dev commitizen cz-conventional-changelog

# é…ç½® package.json
{
  "config": {
    "commitizen": {
      "path": "cz-conventional-changelog"
    }
  }
}

# ä½¿ç”¨
git cz
# æˆ–
npm run commit
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•ä¿®æ”¹å·²ç»æ¨é€çš„æäº¤æ¶ˆæ¯ï¼Ÿ

```bash
# ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤
git commit --amend
git push --force-with-lease

# ä¿®æ”¹å†å²æäº¤
git rebase -i HEAD~3
# å°†è¦ä¿®æ”¹çš„æäº¤æ ‡è®°ä¸º 'reword'
git push --force-with-lease
```

### Q: æäº¤æ¶ˆæ¯å†™é”™äº†æ€ä¹ˆåŠï¼Ÿ

```bash
# å¦‚æœè¿˜æ²¡æ¨é€
git commit --amend -m "æ­£ç¡®çš„æäº¤æ¶ˆæ¯"

# å¦‚æœå·²ç»æ¨é€
git commit --amend -m "æ­£ç¡®çš„æäº¤æ¶ˆæ¯"
git push --force-with-lease
```

### Q: å¦‚ä½•åˆå¹¶å¤šä¸ªæäº¤ï¼Ÿ

```bash
# äº¤äº’å¼å˜åŸº
git rebase -i HEAD~3

# å°†è¦åˆå¹¶çš„æäº¤æ ‡è®°ä¸º 'squash' æˆ– 's'
# ä¿å­˜åç¼–è¾‘åˆå¹¶åçš„æäº¤æ¶ˆæ¯
```

### Q: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ BREAKING CHANGEï¼Ÿ

å½“å˜æ›´ä¼šå¯¼è‡´ç°æœ‰åŠŸèƒ½ä¸å…¼å®¹æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ `BREAKING CHANGE:`ï¼š
- API æ¥å£å˜æ›´
- é…ç½®æ ¼å¼å˜æ›´
- è¡Œä¸ºå˜æ›´
- åˆ é™¤åŠŸèƒ½

## ç›¸å…³æ–‡æ¡£

- [åˆ†æ”¯ç®¡ç†è§„èŒƒ](./BRANCH_MANAGEMENT.md)
- [Pull Request è§„èŒƒ](../../.github/pull_request_template.md)
- [å‘å¸ƒæµç¨‹](./RELEASE_PROCESS.md)
- [Conventional Commits](https://www.conventionalcommits.org/)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025-01-16  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

